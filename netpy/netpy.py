#!/usr/env/python3

import sys
import socket 
import getopt
import threading 
import subprocess 

# Some globals (to be replaced later)
listen = False
command = False
upload = False
execute = ""
target = ""
upload_destination = ""
port = 0

def usage():
    print("NetPy - a simple drop in netcat replacement")
    print()
    print("Usage: netpy.py -t target_host -p target_port")
    print()
    print("Optional flags:")
    print("{} - listen on <host>:<port> for incoming connections".format("\t-l --listen".ljust(20," ")))
    print("{} - execute the selected file when is connection received".format("\t-e --execute=file".ljust(20," ")))
    print("{} - create a command shell".format("\t-s --shell".ljust(20," ")))
    print("{} - upload file to <dest> when connection is received".format("\t-u --upload=dest".ljust(20," ")))
    print()

    sys.exit(0)


def main():

    # Detect if params are missing, if they are show usage
    if not len(sys.argv) > 1:
        usage()

